<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Graph Glide - Linear Equation Challenge</title>
  <style>
    @keyframes glow {
      0%, 100% {
        box-shadow: 0 0 8px #00ffae, 0 0 16px #00ffae;
      }
      50% {
        box-shadow: 0 0 20px #00ffae, 0 0 30px #00ffae;
      }
    }
    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.1);
      }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-5px); }
      40%, 80% { transform: translateX(5px); }
    }
    @keyframes bgAnim {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(270deg, #1f1c2c, #928dab, #1f1c2c);
      background-size: 600% 600%;
      animation: bgAnim 30s ease infinite;
      color: #fff;
      text-align: center;
      padding: 20px;
      user-select: none;
      overflow-x: hidden;
      overflow-y: auto;
      height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }
    h1 {
      margin-bottom: 10px;
      text-shadow: 0 0 10px #00ffae;
    }
    #question {
      font-size: 20px;
      margin-bottom: 20px;
      flex-grow: 1;
      text-shadow: 0 0 6px #00ffae;
    }
    #options {
      margin-bottom: 20px;
    }
    .option-btn {
      background: #222;
      color: #fff;
      border: 2px solid #00ffae;
      border-radius: 8px;
      padding: 12px 18px;
      margin: 8px;
      font-size: 18px;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
      min-width: 60px;
      user-select: none;
      outline: none;
    }
    .option-btn:hover:not(.disabled) {
      animation: glow 1.5s infinite;
      background: #00ffae;
      color: #000;
    }
    .option-btn.correct {
      background-color: #28a745 !important;
      color: white !important;
      animation: pulse 0.6s ease forwards;
      border-color: #28a745 !important;
      cursor: default;
    }
    .option-btn.wrong {
      animation: shake 0.5s ease;
      border-color: #dc3545 !important;
      color: #dc3545 !important;
      background: #330000 !important;
      cursor: default;
    }
    .option-btn.disabled {
      cursor: default;
      opacity: 0.6;
    }
    #submit-btn {
      background: #00ffae;
      color: #000;
      font-weight: bold;
      padding: 12px 24px;
      border: none;
      border-radius: 12px;
      font-size: 20px;
      cursor: pointer;
      box-shadow: 0 0 15px #00ffae;
      margin-bottom: 30px;
      user-select: none;
      outline: none;
      transition: box-shadow 0.3s ease;
    }
    #submit-btn:hover:not(:disabled) {
      box-shadow: 0 0 30px #00ffae;
      transform: scale(1.05);
    }
    #submit-btn:disabled {
      background: #444;
      cursor: not-allowed;
      box-shadow: none;
      color: #888;
    }
    #hearts {
      position: fixed;
      top: 20px;
      right: 20px;
      font-size: 32px;
      user-select: none;
      z-index: 10;
      transition: transform 0.3s ease;
    }
    #hearts.pulse {
      animation: pulse 1s ease;
    }
    #play-again {
      display: none;
      background: #ff4d4d;
      color: #fff;
      padding: 14px 32px;
      font-size: 24px;
      border: none;
      border-radius: 16px;
      cursor: pointer;
      box-shadow: 0 0 20px #ff4d4d;
      margin-top: 20px;
      user-select: none;
      outline: none;
      transition: transform 0.3s ease;
    }
    #play-again:hover {
      transform: scale(1.1);
      box-shadow: 0 0 30px #ff4d4d;
    }
    #end-screen {
      display: none;
      margin-top: 50px;
      font-size: 18px;
      color: #ccc;
      padding: 10px 30px;
      background: rgba(0,0,0,0.3);
      border-radius: 12px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.5;
      user-select: none;
    }
  </style>
</head>
<body>
  <h1>Graph Glide: Linear Equation Challenge</h1>
  <div id="hearts">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
  <div id="question">Press "Start Game" to begin!</div>
  <div id="options"></div>
  <button id="submit-btn" disabled>Submit Answer</button>
  <button id="start-btn">Start Game</button>
  
  <div id="end-screen"></div>
  <button id="play-again">Play Again</button>

<script>
  const questions = [
    {
      q: "Find the intersection points of y = 2x + 1 with x = 2 and y = 5",
      options: [
        {label: "A(2,5)", x: 2, y: 5},
        {label: "B(3,7)", x: 3, y: 7},
        {label: "C(1,3)", x: 1, y: 3},
        {label: "D(2,3)", x: 2, y: 3}
      ],
      answer: ["A(2,5)"]
    },
    {
      q: "For y = -x + 4, select the points where the line crosses y-axis and x-axis",
      options: [
        {label: "A(0,4)", x: 0, y: 4},
        {label: "B(4,0)", x: 4, y: 0},
        {label: "C(1,3)", x: 1, y: 3},
        {label: "D(2,2)", x: 2, y: 2}
      ],
      answer: ["A(0,4)", "B(4,0)"]
    },
    {
      q: "Select the intersection points of y = 3x - 3 with x = 2 and y = 3",
      options: [
        {label: "A(2,3)", x: 2, y: 3},
        {label: "B(1,0)", x: 1, y: 0},
        {label: "C(0,3)", x: 0, y: 3},
        {label: "D(2,4)", x: 2, y: 4}
      ],
      answer: ["A(2,3)"]
    },
    {
      q: "Find the points where y = -2x + 6 crosses the axes",
      options: [
        {label: "A(0,6)", x: 0, y: 6},
        {label: "B(3,0)", x: 3, y: 0},
        {label: "C(2,2)", x: 2, y: 2},
        {label: "D(0,3)", x: 0, y: 3}
      ],
      answer: ["A(0,6)", "B(3,0)"]
    },
    {
      q: "For y = x + 1, select the point on y-axis and the point where x=2",
      options: [
        {label: "A(0,1)", x: 0, y: 1},
        {label: "B(2,3)", x: 2, y: 3},
        {label: "C(1,2)", x: 1, y: 2},
        {label: "D(2,2)", x: 2, y: 2}
      ],
      answer: ["A(0,1)", "B(2,3)"]
    }
  ];

  const totalLevels = 5;
  let currentLevel = 0;
  let selectedPoints = [];
  let chances = 3;

  const questionDiv = document.getElementById("question");
  const optionsDiv = document.getElementById("options");
  const submitBtn = document.getElementById("submit-btn");
  const startBtn = document.getElementById("start-btn");
  const playAgainBtn = document.getElementById("play-again");
  const heartsDiv = document.getElementById("hearts");
  const endScreen = document.getElementById("end-screen");

  function shuffleArray(arr) {
    for(let i = arr.length - 1; i > 0; i--){
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }

  function updateHearts() {
    heartsDiv.textContent = "‚ù§Ô∏è".repeat(chances) + "ü§ç".repeat(3 - chances);
    heartsDiv.classList.add('pulse');
    setTimeout(() => heartsDiv.classList.remove('pulse'), 1000);
  }

  function startGame() {
    currentLevel = 0;
    chances = 3;
    endScreen.style.display = "none";
    questionDiv.style.display = "block";
    optionsDiv.style.display = "block";
    submitBtn.style.display = "inline-block";
    heartsDiv.style.display = "block";
    startBtn.style.display = "none";
    playAgainBtn.style.display = "none";
    updateHearts();
    loadLevel(currentLevel);
  }

  function loadLevel(level) {
    selectedPoints = [];
    submitBtn.disabled = true;
    chances = 3; // reset chances per level
    updateHearts();

    shuffleArray(questions);
    const q = questions[0]; // pick first after shuffle

    questionDiv.textContent = `Level ${level+1}: ${q.q}`;

    optionsDiv.innerHTML = "";

    q.options.forEach(point => {
      const btn = document.createElement("button");
      btn.textContent = point.label;
      btn.className = "option-btn";
      btn.disabled = false;
      btn.onclick = () => {
        if (selectedPoints.includes(point.label)) {
          selectedPoints = selectedPoints.filter(p => p !== point.label);
          btn.style.backgroundColor = "";
        } else {
          if (selectedPoints.length < q.answer.length) {
            selectedPoints.push(point.label);
            btn.style.backgroundColor = "#00ffae";
          } else {
            alert(`Select only ${q.answer.length} points!`);
          }
        }
        submitBtn.disabled = selectedPoints.length !== q.answer.length;
      };
      optionsDiv.appendChild(btn);
    });

    submitBtn.onclick = () => {
      const selectedSorted = [...selectedPoints].sort().join();
      const correctSorted = [...q.answer].sort().join();

      // Disable buttons to prevent multi-click
      [...optionsDiv.children].forEach(b => b.disabled = true);

      if (selectedSorted === correctSorted) {
        [...optionsDiv.children].forEach(btn => {
          if (q.answer.includes(btn.textContent)) {
            btn.classList.add('correct');
          }
        });
        setTimeout(() => {
          currentLevel++;
          if (currentLevel >= totalLevels) {
            showEndScreen(true);
          } else {
            alert("Correct! Moving to next level.");
            loadLevel(currentLevel);
          }
        }, 900);
      } else {
        chances--;
        updateHearts();
        [...optionsDiv.children].forEach(btn => {
          if (selectedPoints.includes(btn.textContent)) {
            btn.classList.add('wrong');
          }
        });
        if (chances <= 0) {
          setTimeout(() => {
            showEndScreen(false);
          }, 900);
        } else {
          setTimeout(() => {
            alert(`Wrong answer! Try again. Chances left: ${chances}`);
            selectedPoints = [];
            [...optionsDiv.children].forEach(btn => {
              btn.style.backgroundColor = "";
              btn.classList.remove('wrong');
              btn.disabled = false;
            });
            submitBtn.disabled = true;
          }, 900);
        }
      }
    };
  }

  function showEndScreen(won) {
    questionDiv.style.display = "none";
    optionsDiv.style.display = "none";
    submitBtn.style.display = "none";
    heartsDiv.style.display = "none";
    startBtn.style.display = "none";
    playAgainBtn.style.display = "inline-block";

    endScreen.style.display = "block";
    endScreen.textContent = won
      ? "Designed and developed by Hari Narayan ‚Äî Dedicated to those who grind hard, study smart, and never quit."
      : "Game Over. Designed and developed by Hari Narayan ‚Äî Dedicated to those who grind hard, study smart, and never quit.";
  }

  playAgainBtn.onclick = () => {
    endScreen.style.display = "none";
    playAgainBtn.style.display = "none";
    startGame();
  };

  startBtn.onclick = startGame;
</script>
</body>
</html>
